{"version":3,"sources":["../server/db.models.js"],"names":["mongooseUniqueValidator","require","saccoSchema","Schema","_id","mongoose","Types","ObjectId","name","type","String","required","address","registration_number","unique","contacts","email","telephone_number","about","description","website","validate","validator","link","indexOf","message","riderSchema","first_name","surname","last_name","Number","passport_photo","Buffer","license_number","insurance","issue_date","Date","exp_date","passport_ID","number_plate","text","created","now","isActive","Boolean","ratings","numberOfStars","sacco","ref","plugin","Sacco","model","Rider","module","exports"],"mappings":"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","sourcesContent":["import mongoose from \"mongoose\";\nimport { Schema } from \"mongoose\";\n\n// UNIQUE PROPERTY VALIDATOR\nconst mongooseUniqueValidator = require('mongoose-unique-validator');\n\n// SCHEMA BLUEPRINTS\nconst saccoSchema = new Schema({\n    _id: mongoose.Schema.Types.ObjectId,\n    name: {\n        type: String,\n        required: true\n    },\n    address: {\n        type: String,\n        required: false\n    },\n    registration_number: {\n        type: String,\n        required: true,\n        unique: true\n    }, contacts: {\n        email: {\n            type: String,\n            unique: true,\n            required: true\n        },\n        telephone_number: {\n            type: String,\n            required: true,\n            unique: true\n        }\n    },\n    about: {\n        description: String,\n        website: {\n            type: String,\n            validate: {\n                validator: (link) => {\n                    return link.indexOf('https://') === 0;\n                },\n                message: 'Webpage URL must start with https://'\n            }\n        }\n\n    }\n    // ....\n\n});\n\n// RIDER SCHEMA\nconst riderSchema = new Schema({\n    _id: mongoose.Schema.Types.ObjectId,// hashed\n    name: {\n        first_name: {\n            type: String,\n            required: true\n        },\n        surname: {\n            type: String,\n            required: true\n        },\n        last_name: {\n            type: String,\n            required: true\n        }\n    },\n    telephone_number: {\n        type: Number,\n        required: true\n    },\n    address: {\n        type: String,\n        required: true\n    },\n    passport_photo: {\n        type: Buffer,\n        required: true\n    },\n    license_number: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    insurance: {\n        Number: {\n            type: String,\n            required: true,\n            unique: true\n        },\n        issue_date: {\n            type: Date,\n            required: true,\n        },\n        exp_date: {\n            type: Date,\n            required: true,\n        }\n    },\n    // revisit\n    passport_ID: {\n        type: String,\n        required: true,\n        unique: true\n\n    },\n    number_plate: {\n        type: String,\n        required: true,\n        unique: true,\n        validate: {\n            validator: (text) => {\n                return text.indexOf('K') === 0;\n            },\n            message: 'Invalid number plate'\n        }\n\n    },\n    created: {\n        type: Date,\n        default: Date.now\n    },\n    // react states\n    isActive: {\n        type: Boolean,\n        default: true\n    },\n    // TODO challenge on how to implement ratings on the riders\n    ratings: [\n        {\n            numberOfStars: Number,\n        }\n    ],\n    // THIS IS WHERE WE REFERENCE THE RIDER TO THEIR RESPECTIVE SACCOS\n    sacco: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: 'Sacco'\n    },\n\n})\n// USING PLUGINS T\nsaccoSchema.plugin(mongooseUniqueValidator);\nriderSchema.plugin(mongooseUniqueValidator);\n\n// CREATING AND SAVING MONGOOSE MODEL \n// THIS CAN ALSO BE EXPORTED TO ANOTHER MODULARISED FILE\nconst Sacco = mongoose.model('Sacco', saccoSchema);\nconst Rider = mongoose.model('Rider', riderSchema);\n\nmodule.exports = {\n    Sacco,\n    Rider\n}"],"file":"db.models.js"}